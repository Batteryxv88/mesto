!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=t((function e(t,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"_checkInputValidity",(function(e){var t=o._formSelector.querySelector("#error-".concat(e.id));e.validity.valid?(t.textContent="",e.classList.remove(o._inputErrorClass)):(t.textContent=e.validationMessage,e.classList.add(o._inputErrorClass))})),n(this,"_checkButtonValidity",(function(){o._formSelector.checkValidity()?o.toggleButtonStateActive():o.toggleButtonStateOff()})),n(this,"toggleButtonStateActive",(function(){o._buttonSubmit.removeAttribute("disabled"),o._buttonSubmit.classList.remove(o._buttonDisabled)})),n(this,"toggleButtonStateOff",(function(){o._buttonSubmit.setAttribute("disabled",""),o._buttonSubmit.classList.add(o._buttonDisabled)})),n(this,"enableValidation",(function(){var e=o._formSelector.querySelectorAll(o._inputSelector);o._checkButtonValidity(),e.forEach((function(e){e.addEventListener("input",(function(e){o._checkInputValidity(e.target),o._checkButtonValidity()}))}))})),this._inputSelector=t.inputSelector,this._inputErrorClass=t.inputErrorClass,this._formSelector=r,this._buttonSubmit=this._formSelector.querySelector(t.buttonSelector),this._buttonDisabled=t.buttonDisabled}));function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(t,n){var r=this,o=t.data,c=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_deleteHandler",(function(){r._element.remove()})),i(this,"_likeHandler",(function(){r._element.querySelector(".element__like").classList.toggle("element__like_active")})),this._data=o,this._name=o.name,this._link=o.link,this._cardSelector=n,this._handleCardClick=c,this._element=this._getTemplate(),this._image=this._element.querySelector(".element__image")}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._setEventListeners(),this._image.src=this._link,this._image.alt=this._name,this._element.querySelector(".element__title").textContent=this._name,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__like").addEventListener("click",this._likeHandler),this._element.querySelector(".element__trash").addEventListener("click",this._deleteHandler),this._image.addEventListener("click",(function(){e._handleCardClick(e._data)}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),u=document.querySelector(".form__field_value_name"),a=document.querySelector(".form__field_value_job"),l=document.querySelector(".profile__edit-button"),s=document.querySelector(".form_type_add"),f=document.querySelector(".profile__add-button"),p=document.querySelector(".form_type_edit"),d={inputSelector:".form__field",buttonSelector:".form__submit-button",inputErrorClass:"form__field_type_error",buttonDisabled:"form__submit-button_disabled"};function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=o,this._renderedItems=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this.close=this.close.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popup.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_active"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close-icon").addEventListener("mousedown",this.close),this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_active")&&e.close()}))}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},S.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(n);if(r){var o=j(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return g(this,e)});function i(e){var t,n,r,c,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),u=function(e){n._popupImg.src=e.link,n._popupImg.alt=e.name,n._popupImgLabel.textContent=e.name,S((t=w(n),j(i.prototype)),"open",t).call(t)},(c="open")in(r=w(n=o.call(this,e)))?Object.defineProperty(r,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):r.open=u,n._popupImg=document.querySelector(".popup__img"),n._popupImgLabel=document.querySelector(".popup__label"),n}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(h);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){var n=t.name,r=t.job;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._job=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this._name.textContent=t,this._job.textContent=n}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=I(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},q.apply(this,arguments)}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function R(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e))._handleFormSubmit=t,n._inputList=n._popup.querySelectorAll(".form__field"),n._form=n._popup.querySelector(".form"),n}return t=c,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"close",value:function(){q(T(c.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;q(T(c.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(h),B=new O(".picture"),D=function(e){var t=new c({data:e,handleCardClick:function(){B.open(e)}},".card-template").generateCard();A.addItem(t)},A=new _({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){D(e)}},".elements"),H=new V(".popup_form_add",(function(e){D(e),M.toggleButtonStateOff()})),U=new C({name:".profile__title",job:".profile__subtitle"}),F=new V(".popup_type_form-edit",(function(e){U.setUserInfo(e)}));function z(e,t){var n=new r(e,t);return n.enableValidation(),n}z(d,p);var M=z(d,s);A.renderItems(),H.setEventListeners(),F.setEventListeners(),B.setEventListeners(),f.addEventListener("mousedown",(function(){H.open()})),l.addEventListener("mousedown",(function(){var e,t,n;t=(e=U.getUserInfo()).name,n=e.job,u.value=t,a.value=n,F.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1hQLEVBQWtCTyxvQkFDbEJqQixFQUFXaUIsb0JBRVh6RCxFQUFrQm5DLGlCQUFpQixhQUFhLFdBQzlDa0YsRUFBV0osVUFHYjdDLEVBQWVqQyxpQkFBaUIsYUFBYSxXQWpCN0MsTUFBbUJnQixFQUFNK0MsRUFBTi9DLEdBQW5CLEVBa0JXb0UsRUFBU1MsZUFsQkQ3RSxLQUFNK0MsRUFBTSxFQUFOQSxJQUN2QmhDLEVBQVV3QyxNQUFRdkQsRUFDbEJnQixFQUFTdUMsTUFBUVIsRUFpQmpCc0IsRUFBa0JQLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGZvcm1TZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGRhdGEuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGRhdGEuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoZGF0YS5idXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9idXR0b25EaXNhYmxlZCA9IGRhdGEuYnV0dG9uRGlzYWJsZWQ7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0KSA9PiB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSAgdGhpcy5fZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoYCNlcnJvci0ke2lucHV0LmlkfWApO1xyXG5cclxuICAgIGlmKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBfY2hlY2tCdXR0b25WYWxpZGl0eSA9ICgpID0+IHtcclxuICAgIGlmICh0aGlzLl9mb3JtU2VsZWN0b3IuY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGVBY3RpdmUoKTsgICAgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlT2ZmKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlQWN0aXZlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fYnV0dG9uU3VibWl0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgIHRoaXMuX2J1dHRvblN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2J1dHRvbkRpc2FibGVkKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlT2ZmID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fYnV0dG9uU3VibWl0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XHJcbiAgICB0aGlzLl9idXR0b25TdWJtaXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9idXR0b25EaXNhYmxlZCk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgY29uc3QgZm9ybSA9IHRoaXMuX2Zvcm1TZWxlY3RvcjtcclxuICAgICAgXHJcbiAgICBjb25zdCBpbnB1dHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XHJcbiAgXHJcbiAgICB0aGlzLl9jaGVja0J1dHRvblZhbGlkaXR5KCk7XHJcbiAgXHJcbiAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tCdXR0b25WYWxpZGl0eSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHtkYXRhLCBoYW5kbGVDYXJkQ2xpY2t9LCBjYXJkU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlSGFuZGxlciA9ICgpID0+IHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBfbGlrZUhhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJykuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fbGlrZV9hY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2xpa2VIYW5kbGVyKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190cmFzaCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fZGVsZXRlSGFuZGxlcik7XHJcblxyXG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9kYXRhKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSIsImV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fZmllbGRfdmFsdWVfbmFtZScpO1xyXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fZmllbGRfdmFsdWVfam9iJyk7XHJcbmV4cG9ydCBjb25zdCBidXR0b25Gb3JtT3BlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgZm9ybUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBidXR0b25Gb3JtT3BlbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfZWRpdCcpO1xyXG5leHBvcnQgY29uc3QgZWxlbWVudHMgPSAnLmVsZW1lbnRzJztcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtRGF0YSA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2ZpZWxkJyxcclxuICBidXR0b25TZWxlY3RvcjogJy5mb3JtX19zdWJtaXQtYnV0dG9uJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19maWVsZF90eXBlX2Vycm9yJyxcclxuICBidXR0b25EaXNhYmxlZDogJ2Zvcm1fX3N1Ym1pdC1idXR0b25fZGlzYWJsZWQnLFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xyXG4gIH1cclxuXTsgIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cCk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9hY3RpdmUnKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2FjdGl2ZScpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1pY29uJykuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5jbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfYWN0aXZlJykpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9wb3B1cEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1nJyk7XHJcbiAgICB0aGlzLl9wb3B1cEltZ0xhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19sYWJlbCcpO1xyXG4gIH1cclxuXHJcbiAgb3BlbiA9ICh2YWx1ZXMpID0+IHtcclxuICAgIHRoaXMuX3BvcHVwSW1nLnNyYyA9IHZhbHVlcy5saW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWcuYWx0ID0gdmFsdWVzLm5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cEltZ0xhYmVsLnRleHRDb250ZW50ID0gdmFsdWVzLm5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHtuYW1lLCBqb2J9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKTtcclxuICAgIHRoaXMuX2pvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2IudGV4dENvbnRlbnRcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7bmFtZSwgam9ifSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19maWVsZCcpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgfVxyXG59IiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCAgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgeyBuYW1lSW5wdXQsIGpvYklucHV0LCBidXR0b25Gb3JtT3BlbiwgZm9ybUFkZCwgXHJcbiAgYnV0dG9uRm9ybU9wZW5BZGQsIGZvcm1FZGl0LCBlbGVtZW50cywgZm9ybURhdGEgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5cclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBpY3R1cmUnKTtcclxuXHJcblxyXG5jb25zdCByZW5kZXJDYXJkID0gKGl0ZW0pID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe2RhdGE6IGl0ZW0sIFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XHJcbiAgICAgIHBvcHVwSW1hZ2Uub3BlbihpdGVtKTtcclxuICAgIH1cclxuICB9LCcuY2FyZC10ZW1wbGF0ZScpO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICBkZWZhdWx0Q2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbn1cclxuXHJcbmNvbnN0IGRlZmF1bHRDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHsgXHJcbiAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICByZW5kZXJDYXJkKGl0ZW0pO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgZWxlbWVudHNcclxuKTtcclxuXHJcbmNvbnN0IG5ld0NhcmRBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2Zvcm1fYWRkJyxcclxuICAgIChpdGVtKSA9PiB7XHJcbiAgICAgIHJlbmRlckNhcmQoaXRlbSk7XHJcbiAgICAgIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGVPZmYoKTtcclxuICAgIH1cclxuKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtuYW1lOiAnLnByb2ZpbGVfX3RpdGxlJywgam9iOicucHJvZmlsZV9fc3VidGl0bGUnfSk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhGb3JtRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9mb3JtLWVkaXQnLCAoZGF0YSkgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG59KTtcclxuXHJcbi8v0YTRg9C90LrRhtC40Y8g0LLQsNC70LjQtNCw0YbQuNC4XHJcbmZ1bmN0aW9uIHN0YXJ0VmFsaWRhdGUoZGF0YSwgZm9ybUl0ZW0pIHtcclxuICBjb25zdCBmb3JtVmFsaWRhdGVkID0gbmV3IEZvcm1WYWxpZGF0b3IoZGF0YSwgZm9ybUl0ZW0pO1xyXG4gIGZvcm1WYWxpZGF0ZWQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIHJldHVybiBmb3JtVmFsaWRhdGVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaWxsRm9ybSh7bmFtZSwgam9ifSkge1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgam9iSW5wdXQudmFsdWUgPSBqb2I7XHJcbn1cclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gc3RhcnRWYWxpZGF0ZShmb3JtRGF0YSwgZm9ybUVkaXQpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gc3RhcnRWYWxpZGF0ZShmb3JtRGF0YSwgZm9ybUFkZCk7XHJcblxyXG5kZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxubmV3Q2FyZEFkZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhGb3JtRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5idXR0b25Gb3JtT3BlbkFkZC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiB7XHJcbiAgbmV3Q2FyZEFkZC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYnV0dG9uRm9ybU9wZW4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCkgPT4ge1xyXG4gIGZpbGxGb3JtKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG4gIHBvcHVwV2l0aEZvcm1FZGl0Lm9wZW4oKTtcclxufSkiXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImRhdGEiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dCIsImVycm9yTWVzc2FnZSIsIl9mb3JtU2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJfaW5wdXRFcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJhZGQiLCJjaGVja1ZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGVBY3RpdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZU9mZiIsIl9idXR0b25TdWJtaXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfYnV0dG9uRGlzYWJsZWQiLCJzZXRBdHRyaWJ1dGUiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2lucHV0U2VsZWN0b3IiLCJfY2hlY2tCdXR0b25WYWxpZGl0eSIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidGFyZ2V0IiwidGhpcyIsImlucHV0U2VsZWN0b3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJidXR0b25TZWxlY3RvciIsImJ1dHRvbkRpc2FibGVkIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIl9lbGVtZW50IiwidG9nZ2xlIiwiX2RhdGEiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsIl9pbWFnZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInNyYyIsImFsdCIsIl9saWtlSGFuZGxlciIsIl9kZWxldGVIYW5kbGVyIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJidXR0b25Gb3JtT3BlbiIsImZvcm1BZGQiLCJidXR0b25Gb3JtT3BlbkFkZCIsImZvcm1FZGl0IiwiZm9ybURhdGEiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJpdGVtIiwiUG9wdXAiLCJwb3B1cCIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJjbG9zZSIsImV2dCIsImtleSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwidmFsdWVzIiwiX3BvcHVwSW1nIiwiX3BvcHVwSW1nTGFiZWwiLCJVc2VySW5mbyIsImpvYiIsIl9qb2IiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsIl9mb3JtIiwiX2Zvcm1WYWx1ZXMiLCJ2YWx1ZSIsInJlc2V0IiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJwb3B1cEltYWdlIiwicmVuZGVyQ2FyZCIsImNhcmRFbGVtZW50Iiwib3BlbiIsImdlbmVyYXRlQ2FyZCIsImRlZmF1bHRDYXJkTGlzdCIsImFkZEl0ZW0iLCJuZXdDYXJkQWRkIiwiYWRkRm9ybVZhbGlkYXRvciIsInVzZXJJbmZvIiwicG9wdXBXaXRoRm9ybUVkaXQiLCJzZXRVc2VySW5mbyIsInN0YXJ0VmFsaWRhdGUiLCJmb3JtSXRlbSIsImZvcm1WYWxpZGF0ZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVuZGVySXRlbXMiLCJzZXRFdmVudExpc3RlbmVycyIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==