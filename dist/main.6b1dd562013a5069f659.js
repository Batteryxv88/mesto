!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=t((function e(t,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"_checkInputValidity",(function(e){var t=o._formSelector.querySelector("#error-".concat(e.id));e.validity.valid?(t.textContent="",e.classList.remove(o._inputErrorClass)):(t.textContent=e.validationMessage,e.classList.add(o._inputErrorClass))})),n(this,"_checkButtonValidity",(function(){o._formSelector.checkValidity()?o.toggleButtonStateActive():o.toggleButtonStateOff()})),n(this,"toggleButtonStateActive",(function(){o._buttonSubmit.removeAttribute("disabled"),o._buttonSubmit.classList.remove("form__submit-button_disabled")})),n(this,"toggleButtonStateOff",(function(){o._buttonSubmit.setAttribute("disabled",""),o._buttonSubmit.classList.add("form__submit-button_disabled")})),n(this,"enableValidation",(function(){var e=o._formSelector.querySelectorAll(o._inputSelector);o._checkButtonValidity(),e.forEach((function(e){e.addEventListener("input",(function(e){o._checkInputValidity(e.target),o._checkButtonValidity()}))}))})),this._inputSelector=t.inputSelector,this._buttonSelector=t.buttonSelector,this._disabledButtonClass=t.disabledButtonClass,this._inputErrorClass=t.inputErrorClass,this._formSelector=r,this._buttonSubmit=this._formSelector.querySelector(t.buttonSelector)}));function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n){var r=this,o=t.data,u=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_deleteHandler",(function(){r._element.remove()})),i(this,"_likeHandler",(function(){r._element.querySelector(".element__like").classList.toggle("element__like_active")})),this._name=o.name,this._link=o.link,this._cardSelector=n,this._handleCardClick=u}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){this._element=this._getTemplate();var e=this._element.querySelector(".element__image");return this._setEventListeners(),e.src=this._link,e.alt=this._name,this._element.querySelector(".element__title").textContent=this._name,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__like").addEventListener("click",this._likeHandler),this._element.querySelector(".element__trash").addEventListener("click",this._deleteHandler),this._element.querySelector(".element__image").addEventListener("click",(function(){e._handleCardClick()}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),c=document.querySelector(".form__field_value_name"),a=document.querySelector(".form__field_value_job"),l=document.querySelector(".profile__edit-button"),s=document.querySelector(".profile__title"),f=document.querySelector(".profile__subtitle"),p=document.querySelector(".form_type_add"),d=document.querySelector(".profile__add-button"),_=document.querySelector(".form_type_edit"),y={inputSelector:".form__field",buttonSelector:".form__submit-button",disabledButtonClass:"form__submit-button_disabled",inputErrorClass:"form__field_type_error"};function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=o,this._renderedItems=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){o._selector.classList.remove("popup_active"),document.removeEventListener("keydown",o._handleEscClose)},(n="close")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._selector=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._selector.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._selector.querySelector(".popup__close-icon").addEventListener("mousedown",this.close),this._selector.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_active")&&e.close()})),this._selector.addEventListener("keydown",this._handleEscClose)}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function S(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},j.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(n);if(r){var o=E(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return S(this,e)});function i(e,t){var n,r,u,c,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a=function(){r._popupImg.src=r._link,r._popupImg.alt=r._name,r._popupImgLabel.textContent=r._name,j((n=k(r),E(i.prototype)),"open",n).call(n)},(c="open")in(u=k(r=o.call(this,e)))?Object.defineProperty(u,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):u.open=a,r._name=t.name,r._link=t.link,r._popupImg=document.querySelector(".popup__img"),r._popupImgLabel=document.querySelector(".popup__label"),r}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(v);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._job=n}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name,job:this._job}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this._name.textContent=t,this._job.textContent=n}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=R(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(this,arguments)}function R(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}function B(e,t){return B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},B(e,t)}function T(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleFormSubmit=t,n._inputs=n._selector.querySelectorAll(".form__field"),n._formAdd=document.querySelector(".form_type_add"),n._input1=n._inputs[0],n._input2=n._inputs[1],n._nameInput=document.querySelector(".form__field_value_name"),n._jobInput=document.querySelector(".form__field_value_job"),n}return t=u,(n=[{key:"_getInputValues",value:function(){return{name:this._input1.value,link:this._input2.value}}},{key:"setInputValues",value:function(e){var t=e.name,n=e.job;this._nameInput.value=t,this._jobInput.value=n}},{key:"setEventListeners",value:function(){var e=this;x(V(u.prototype),"setEventListeners",this).call(this),this._selector.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e._formAdd.reset()}))}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(v),D=new b({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){var t=new u({data:e,handleCardClick:function(){var t=new C(".picture",e);t.open(),t.setEventListeners()}},".card-template").generateCard();D.addItem(t)}},".elements"),H=new A(".popup_form_add",(function(e){var t=new u({data:e,handleCardClick:function(){var t=new C(".picture",e);t.open(),t.setEventListeners()}},".card-template").generateCard();D.addItem(t),H.close(),z.toggleButtonStateOff()})),U=new A(".popup_type_form-edit",(function(){new L(s,f).setUserInfo({name:c.value,job:a.value}),U.close()}));function F(e,t){var n=new r(e,t);return n.enableValidation(),n}F(y,_);var z=F(y,p);D.renderItems(),H.setEventListeners(),U.setEventListeners(),d.addEventListener("mousedown",(function(){H.open()})),l.addEventListener("mousedown",(function(){U.setInputValues({name:s.textContent,job:f.textContent}),U.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN4Qk0sRUFBVzVCLFFBdUJiOEIsRUFBaUJsRywwQkFsQmJtRyxFQUFvQixJQUFJdkIsRUFBYyx5QkFBeUIsV0FDbEQsSUFBSUgsRUFBUzdCLEVBQVlDLEdBQ2pDdUQsWUFBWSxDQUFDMUUsS0FBTWUsRUFBVTRDLE1BQU9YLElBQUtoQyxFQUFTMkMsUUFDM0RjLEVBQWtCL0IsV0FJcEIsU0FBU2lDLEVBQWN0SCxFQUFNdUgsR0FDM0IsSUFBTUMsRUFBZ0IsSUFBSXpILEVBQWNDLEVBQU11SCxHQUU5QyxPQURBQyxFQUFjQyxtQkFDUEQsRUFHaUJGLEVBQWNwRCxFQUFVRCxHQUFsRCxJQUNNa0QsRUFBbUJHLEVBQWNwRCxFQUFVSCxHQVFqRDJDLEVBQWdCZ0IsY0FDaEJULEVBQVdILG9CQUNYTSxFQUFrQk4sb0JBRWxCOUMsRUFBa0J0QyxpQkFBaUIsYUFBYSxXQUM5Q3VGLEVBQVdKLFVBR2JqRCxFQUFlbEMsaUJBQWlCLGFBQWEsV0FDM0MwRixFQUFrQk8sZUFBZSxDQUFDaEYsS0FBTWtCLEVBQVdwRCxZQUFha0YsSUFBSzdCLEVBQVVyRCxjQUMvRTJHLEVBQWtCUCxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBmb3JtU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBkYXRhLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9idXR0b25TZWxlY3RvciA9IGRhdGEuYnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9kaXNhYmxlZEJ1dHRvbkNsYXNzID0gZGF0YS5kaXNhYmxlZEJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gZGF0YS5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9idXR0b25TdWJtaXQgPSB0aGlzLl9mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvcihkYXRhLmJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9ICB0aGlzLl9mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvcihgI2Vycm9yLSR7aW5wdXQuaWR9YCk7XHJcblxyXG4gICAgaWYoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIF9jaGVja0J1dHRvblZhbGlkaXR5ID0gKCkgPT4ge1xyXG4gICAgaWYgKHRoaXMuX2Zvcm1TZWxlY3Rvci5jaGVja1ZhbGlkaXR5KCkpIHtcclxuICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZUFjdGl2ZSgpOyAgICBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGVPZmYoKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGVBY3RpdmUgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9idXR0b25TdWJtaXQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgdGhpcy5fYnV0dG9uU3VibWl0LmNsYXNzTGlzdC5yZW1vdmUoJ2Zvcm1fX3N1Ym1pdC1idXR0b25fZGlzYWJsZWQnKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlT2ZmID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fYnV0dG9uU3VibWl0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XHJcbiAgICB0aGlzLl9idXR0b25TdWJtaXQuY2xhc3NMaXN0LmFkZCgnZm9ybV9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZCcpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9mb3JtU2VsZWN0b3I7XHJcbiAgICAgIFxyXG4gICAgY29uc3QgaW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xyXG4gIFxyXG4gICAgdGhpcy5fY2hlY2tCdXR0b25WYWxpZGl0eSgpO1xyXG4gIFxyXG4gICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrQnV0dG9uVmFsaWRpdHkoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7ZGF0YSwgaGFuZGxlQ2FyZENsaWNrfSwgY2FyZFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIGltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBpbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2RlbGV0ZUhhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgX2xpa2VIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2VfYWN0aXZlJyk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9saWtlSGFuZGxlcik7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdHJhc2gnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2RlbGV0ZUhhbmRsZXIpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljaygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19maWVsZF92YWx1ZV9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19maWVsZF92YWx1ZV9qb2InKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkZvcm1PcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBuYW1lT3V0cHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJyk7XHJcbmV4cG9ydCBjb25zdCBqb2JPdXRwdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fc3VidGl0bGUnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX2FkZCcpO1xyXG5leHBvcnQgY29uc3QgYnV0dG9uRm9ybU9wZW5BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgZm9ybUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX2VkaXQnKTtcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzID0gJy5lbGVtZW50cyc7XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybURhdGEgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19maWVsZCcsXHJcbiAgYnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fc3VibWl0LWJ1dHRvbicsXHJcbiAgZGlzYWJsZWRCdXR0b25DbGFzczogJ2Zvcm1fX3N1Ym1pdC1idXR0b25fZGlzYWJsZWQnLFxyXG4gIGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2ZpZWxkX3R5cGVfZXJyb3InLFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xyXG4gIH1cclxuXTsgIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX2FjdGl2ZScpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fc2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfYWN0aXZlJyk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9zZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWljb24nKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmNsb3NlKTtcclxuICAgIHRoaXMuX3NlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9hY3RpdmUnKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBkYXRhKSB7XHJcbiAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX3BvcHVwSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcclxuICAgIHRoaXMuX3BvcHVwSW1nTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2xhYmVsJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fcG9wdXBJbWcuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX3BvcHVwSW1nLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9wb3B1cEltZ0xhYmVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IobmFtZSwgam9iKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYiA9IGpvYjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtuYW1lOiB0aGlzLl9uYW1lLCBqb2I6IHRoaXMuX2pvYn07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7bmFtZSwgam9ifSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX3NlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19maWVsZCcpO1xyXG4gICAgdGhpcy5fZm9ybUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfYWRkJyk7XHJcbiAgICB0aGlzLl9pbnB1dDEgPSB0aGlzLl9pbnB1dHNbMF07XHJcbiAgICB0aGlzLl9pbnB1dDIgPSB0aGlzLl9pbnB1dHNbMV07XHJcbiAgICB0aGlzLl9uYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fZmllbGRfdmFsdWVfbmFtZScpO1xyXG4gICAgdGhpcy5fam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fZmllbGRfdmFsdWVfam9iJyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9pbnB1dDEudmFsdWUsXHJcbiAgICAgIGxpbms6IHRoaXMuX2lucHV0Mi52YWx1ZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKHtuYW1lLCBqb2J9KSB7XHJcbiAgICB0aGlzLl9uYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iSW5wdXQudmFsdWUgPSBqb2I7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9zZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLl9mb3JtQWRkLnJlc2V0KCk7XHJcbiAgICB9KVxyXG4gIH1cclxufSIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgbmFtZUlucHV0LCBqb2JJbnB1dCwgYnV0dG9uRm9ybU9wZW4sIG5hbWVPdXRwdXQsXHJcbiAgam9iT3V0cHV0LCBmb3JtQWRkLCBidXR0b25Gb3JtT3BlbkFkZCwgZm9ybUVkaXQsXHJcbiAgZWxlbWVudHMsIGZvcm1EYXRhIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgJy4vaW5kZXguY3NzJztcclxuXHJcblxyXG5jb25zdCBkZWZhdWx0Q2FyZExpc3QgPSBuZXcgU2VjdGlvbih7IFxyXG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7ZGF0YTogaXRlbSwgXHJcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5waWN0dXJlJywgaXRlbSk7XHJcbiAgICAgICAgcG9wdXBJbWFnZS5vcGVuKCk7XHJcbiAgICAgICAgcG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICB9XHJcbiAgICB9LCcuY2FyZC10ZW1wbGF0ZScpO1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgZGVmYXVsdENhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgZWxlbWVudHNcclxuKTtcclxuXHJcbmNvbnN0IG5ld0NhcmRBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2Zvcm1fYWRkJyxcclxuICAgIChuZXdDYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe2RhdGE6IG5ld0NhcmREYXRhLFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBjb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucGljdHVyZScsIG5ld0NhcmREYXRhKTtcclxuICAgICAgICBwb3B1cEltYWdlLm9wZW4oKTtcclxuICAgICAgICBwb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgIH1cclxuICAgIH0sICcuY2FyZC10ZW1wbGF0ZScpO1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgZGVmYXVsdENhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgbmV3Q2FyZEFkZC5jbG9zZSgpO1xyXG4gICAgcmVzZXRCdXR0b24oKTtcclxuICAgIH1cclxuKTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEZvcm1FZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2Zvcm0tZWRpdCcsICgpID0+IHtcclxuICBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhuYW1lT3V0cHV0LCBqb2JPdXRwdXQpO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtuYW1lOiBuYW1lSW5wdXQudmFsdWUsIGpvYjogam9iSW5wdXQudmFsdWV9KTtcclxuICBwb3B1cFdpdGhGb3JtRWRpdC5jbG9zZSgpOyBcclxufSk7XHJcblxyXG4vL9GE0YPQvdC60YbQuNGPINCy0LDQu9C40LTQsNGG0LjQuFxyXG5mdW5jdGlvbiBzdGFydFZhbGlkYXRlKGRhdGEsIGZvcm1JdGVtKSB7XHJcbiAgY29uc3QgZm9ybVZhbGlkYXRlZCA9IG5ldyBGb3JtVmFsaWRhdG9yKGRhdGEsIGZvcm1JdGVtKTtcclxuICBmb3JtVmFsaWRhdGVkLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICByZXR1cm4gZm9ybVZhbGlkYXRlZDtcclxufVxyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBzdGFydFZhbGlkYXRlKGZvcm1EYXRhLCBmb3JtRWRpdCk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBzdGFydFZhbGlkYXRlKGZvcm1EYXRhLCBmb3JtQWRkKTtcclxuXHJcbi8v0YTRg9C90LrRhtC40Y8g0YHQsdGA0L7RgdCwINC60L3QvtC/0LrQuFxyXG5mdW5jdGlvbiByZXNldEJ1dHRvbigpIHtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlT2ZmKCk7XHJcbn1cclxuXHJcbi8vXHJcbmRlZmF1bHRDYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG5uZXdDYXJkQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aEZvcm1FZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5idXR0b25Gb3JtT3BlbkFkZC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiB7XHJcbiAgbmV3Q2FyZEFkZC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYnV0dG9uRm9ybU9wZW4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCkgPT4ge1xyXG4gIHBvcHVwV2l0aEZvcm1FZGl0LnNldElucHV0VmFsdWVzKHtuYW1lOiBuYW1lT3V0cHV0LnRleHRDb250ZW50LCBqb2I6IGpvYk91dHB1dC50ZXh0Q29udGVudH0pO1xyXG4gIHBvcHVwV2l0aEZvcm1FZGl0Lm9wZW4oKTtcclxufSkiXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImRhdGEiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dCIsImVycm9yTWVzc2FnZSIsIl9mb3JtU2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJfaW5wdXRFcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJhZGQiLCJjaGVja1ZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGVBY3RpdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZU9mZiIsIl9idXR0b25TdWJtaXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2lucHV0U2VsZWN0b3IiLCJfY2hlY2tCdXR0b25WYWxpZGl0eSIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidGFyZ2V0IiwidGhpcyIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uU2VsZWN0b3IiLCJidXR0b25TZWxlY3RvciIsIl9kaXNhYmxlZEJ1dHRvbkNsYXNzIiwiZGlzYWJsZWRCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJfZWxlbWVudCIsInRvZ2dsZSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2dldFRlbXBsYXRlIiwiaW1hZ2UiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJfbGlrZUhhbmRsZXIiLCJfZGVsZXRlSGFuZGxlciIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiYnV0dG9uRm9ybU9wZW4iLCJuYW1lT3V0cHV0Iiwiam9iT3V0cHV0IiwiZm9ybUFkZCIsImJ1dHRvbkZvcm1PcGVuQWRkIiwiZm9ybUVkaXQiLCJmb3JtRGF0YSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsIml0ZW0iLCJQb3B1cCIsInNlbGVjdG9yIiwiX3NlbGVjdG9yIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJldnQiLCJrZXkiLCJjbG9zZSIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWciLCJfcG9wdXBJbWdMYWJlbCIsIlVzZXJJbmZvIiwiam9iIiwiX2pvYiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRzIiwiX2Zvcm1BZGQiLCJfaW5wdXQxIiwiX2lucHV0MiIsIl9uYW1lSW5wdXQiLCJfam9iSW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJkZWZhdWx0Q2FyZExpc3QiLCJjYXJkRWxlbWVudCIsInBvcHVwSW1hZ2UiLCJvcGVuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtIiwibmV3Q2FyZEFkZCIsIm5ld0NhcmREYXRhIiwiYWRkRm9ybVZhbGlkYXRvciIsInBvcHVwV2l0aEZvcm1FZGl0Iiwic2V0VXNlckluZm8iLCJzdGFydFZhbGlkYXRlIiwiZm9ybUl0ZW0iLCJmb3JtVmFsaWRhdGVkIiwiZW5hYmxlVmFsaWRhdGlvbiIsInJlbmRlckl0ZW1zIiwic2V0SW5wdXRWYWx1ZXMiXSwic291cmNlUm9vdCI6IiJ9